# PRD: Notion CMS 개인 개발 블로그

## 1. 프로젝트 개요

### 프로젝트명
Notion CMS 개인 개발 블로그

### 목적
Notion을 CMS(Content Management System)로 활용하여 개인 개발 블로그를 구축한다. Notion에서 글을 작성하면 블로그에 자동으로 반영되는 구조로, 별도의 관리자 페이지 없이 Notion만으로 콘텐츠를 관리할 수 있다.

### Notion을 CMS로 선택한 이유
- **편리한 글 작성 환경**: Notion의 블록 에디터로 코드 블록, 이미지, 테이블 등 다양한 콘텐츠를 직관적으로 작성 가능
- **별도 DB 불필요**: Notion 데이터베이스가 콘텐츠 저장소 역할을 하므로 별도의 데이터베이스 구축/관리 비용 없음
- **무료 사용**: Notion 개인 플랜으로 충분히 운영 가능
- **API 지원**: Notion API를 통해 데이터베이스 조회, 페이지 콘텐츠 가져오기 등 프로그래밍 방식으로 접근 가능
- **빠른 MVP 구현**: 백엔드 로직 최소화로 프론트엔드에 집중할 수 있음

---

## 2. 기술 스택

| 구분 | 기술 | 버전/비고 |
|------|------|-----------|
| 프레임워크 | Next.js (App Router) | 15+ |
| 언어 | TypeScript | strict 모드 |
| 스타일링 | Tailwind CSS | v4, CSS-first |
| UI 컴포넌트 | shadcn/ui | 커스터마이징 가능 |
| 상태관리 | Zustand | 필요시 사용 |
| CMS | Notion API | `@notionhq/client` |
| Notion 렌더링 | `notion-to-md` 또는 커스텀 렌더러 | Notion 블록 → HTML/React 변환 |
| 배포 | Vercel | 자동 배포 |
| 인증 | NextAuth v5 | 기존 대시보드 인증 유지 |

---

## 3. Notion 데이터베이스 구조

블로그 글을 관리하기 위한 Notion 데이터베이스 속성:

| 속성명 | 타입 | 설명 | 필수 |
|--------|------|------|------|
| Title | Title | 글 제목 | O |
| Slug | Rich Text | URL 경로 (예: `my-first-post`) | O |
| Description | Rich Text | 글 요약 (목록에서 미리보기 용도) | O |
| Category | Select | 카테고리 (예: React, Next.js, TypeScript 등) | O |
| Tags | Multi-select | 태그 목록 | X |
| Published | Checkbox | 발행 여부 (체크된 글만 블로그에 노출) | O |
| PublishedAt | Date | 발행일 | O |
| Thumbnail | Files & Media | 썸네일 이미지 | X |

---

## 4. 주요 기능

### 4.1 글 목록 페이지
- Notion 데이터베이스에서 `Published`가 체크된 글만 조회
- `PublishedAt` 기준 최신순 정렬
- 페이지네이션 (페이지당 9개)
- 각 글 카드에 썸네일, 제목, 요약, 카테고리, 발행일 표시

### 4.2 글 상세 페이지
- Notion 페이지 콘텐츠를 HTML/React 컴포넌트로 렌더링
- 지원 블록 타입: 제목(H1~H3), 단락, 코드 블록(구문 강조), 이미지, 인용, 목록(순서/비순서), 구분선, 콜아웃, 토글, 테이블
- 목차(TOC) 자동 생성 (H2, H3 기반)
- 이전/다음 글 네비게이션
- 글 메타 정보 표시 (카테고리, 태그, 발행일, 예상 읽기 시간)

### 4.3 카테고리 필터링
- 전체 카테고리 목록 표시
- 카테고리 선택 시 해당 카테고리 글만 필터링
- URL 기반 필터링 (`/blog?category=React` 또는 `/blog/category/[slug]`)

### 4.4 검색
- 제목, 요약 기반 클라이언트 사이드 검색
- 검색 결과 실시간 표시
- 검색어 하이라이팅

### 4.5 반응형 디자인
- 모바일, 태블릿, 데스크톱 대응
- 모바일에서는 글 카드 1열 배치, 데스크톱에서는 3열 그리드

---

## 5. 화면 구성

### 5.1 블로그 홈 (`/blog`)
```
┌──────────────────────────────────────────┐
│ Header (기존 대시보드 헤더 또는 블로그 전용) │
├──────────────────────────────────────────┤
│ 히어로 섹션 (블로그 소개 + 검색창)          │
├──────────────────────────────────────────┤
│ 카테고리 필터 탭                           │
├──────────────────────────────────────────┤
│ ┌──────┐ ┌──────┐ ┌──────┐              │
│ │ 글 1  │ │ 글 2  │ │ 글 3  │              │
│ └──────┘ └──────┘ └──────┘              │
│ ┌──────┐ ┌──────┐ ┌──────┐              │
│ │ 글 4  │ │ 글 5  │ │ 글 6  │              │
│ └──────┘ └──────┘ └──────┘              │
├──────────────────────────────────────────┤
│ 페이지네이션                              │
├──────────────────────────────────────────┤
│ Footer                                   │
└──────────────────────────────────────────┘
```

### 5.2 글 상세 (`/blog/[slug]`)
```
┌──────────────────────────────────────────┐
│ Header                                   │
├──────────────────────────────────────────┤
│ 뒤로가기 링크                              │
├──────────────────────────────────────────┤
│ 글 제목                                   │
│ 메타 정보 (카테고리 · 날짜 · 읽기 시간)     │
├──────────────────────────────────────────┤
│ 썸네일 이미지                              │
├─────────────────────┬────────────────────┤
│                     │ 목차 (데스크톱)      │
│ 본문 콘텐츠          │ - H2 제목 1        │
│                     │   - H3 제목 1-1    │
│                     │ - H2 제목 2        │
│                     │                    │
├─────────────────────┴────────────────────┤
│ 태그 목록                                 │
├──────────────────────────────────────────┤
│ 이전 글 / 다음 글 네비게이션                │
├──────────────────────────────────────────┤
│ Footer                                   │
└──────────────────────────────────────────┘
```

### 5.3 카테고리별 목록 (`/blog/category/[slug]`)
- 블로그 홈과 동일한 레이아웃
- 해당 카테고리가 활성화된 상태로 표시
- 카테고리 설명 (선택사항)

---

## 6. MVP 범위

### MVP에 포함
- [x] Notion API 연동 및 글 목록 조회
- [x] 글 상세 페이지 렌더링 (기본 블록 타입)
- [x] 카테고리 필터링
- [x] 페이지네이션
- [x] 반응형 디자인
- [x] SEO 최적화 (메타태그, Open Graph)
- [x] ISR(Incremental Static Regeneration) 캐싱
- [x] 다크모드 지원 (기존 테마 시스템 활용)

### MVP 이후 (향후 확장)
- [ ] 검색 기능
- [ ] 댓글 시스템 (giscus 등)
- [ ] RSS 피드 생성
- [ ] 시리즈(연재) 기능
- [ ] 조회수 트래킹
- [ ] 코드 블록 복사 버튼
- [ ] 목차(TOC) 스크롤 동기화
- [ ] 소셜 공유 버튼
- [ ] 관련 글 추천

---

## 7. 비기능 요구사항

### 7.1 성능
- Lighthouse 성능 점수 90점 이상 목표
- ISR을 활용한 정적 페이지 생성 (revalidate: 60초)
- 이미지 최적화 (`next/image` 활용)
- 코드 스플리팅 및 레이지 로딩

### 7.2 SEO
- 각 페이지별 고유 `<title>`, `<meta description>` 설정
- Open Graph / Twitter Card 메타태그
- `sitemap.xml`, `robots.txt` 자동 생성
- 구조화된 데이터 (JSON-LD, Article 스키마)
- 시맨틱 HTML 태그 사용

### 7.3 접근성
- WCAG 2.1 AA 수준 준수 목표
- 키보드 네비게이션 지원
- 적절한 색상 대비 비율
- 이미지 대체 텍스트 제공
- 스크린 리더 호환

### 7.4 캐싱 전략
- **ISR**: 글 목록, 글 상세 페이지 (revalidate: 60초)
- **On-Demand Revalidation**: Notion webhook 또는 수동 API 호출로 즉시 갱신 (향후)
- **클라이언트 캐싱**: 카테고리, 태그 목록 등 변경 빈도 낮은 데이터

---

## 8. 라우트 설계

| 경로 | 설명 | 렌더링 방식 |
|------|------|-------------|
| `/blog` | 블로그 홈 (글 목록) | ISR |
| `/blog/[slug]` | 글 상세 페이지 | ISR |
| `/blog/category/[slug]` | 카테고리별 글 목록 | ISR |
| `/api/revalidate` | ISR 수동 재검증 엔드포인트 | API Route |

---

## 9. 환경 변수 (추가)

기존 환경 변수에 더해 다음이 필요:

```env
NOTION_API_KEY=          # Notion Integration 토큰
NOTION_DATABASE_ID=      # 블로그 글 데이터베이스 ID
REVALIDATE_SECRET=       # ISR 재검증 API 시크릿 (선택)
```

---

## 10. 향후 확장 가능성

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 댓글 시스템 | giscus (GitHub Discussions 기반) 연동 | 높음 |
| RSS 피드 | `/feed.xml` 자동 생성 | 높음 |
| 검색 | 제목/내용 기반 검색 | 중간 |
| 시리즈 기능 | 연재글 그룹핑 및 네비게이션 | 중간 |
| 조회수 | Vercel Analytics 또는 별도 카운터 | 낮음 |
| 뉴스레터 | 이메일 구독 기능 | 낮음 |
| i18n | 다국어 지원 | 낮음 |
